<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë©”ì´ì»¤ Â· í€˜ìŠ¤íŠ¸ ê´€ë¦¬</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:system-ui;background:#020617;color:#e5e7eb;padding:30px}
.quest{background:#0f172a;padding:16px;border-radius:10px;margin-bottom:20px}
button{margin-top:8px;padding:8px 12px;border:none;border-radius:6px;font-weight:bold;cursor:pointer}
.select{background:#22c55e;color:#022c22}
small{opacity:.7}
</style>
</head>
<body>

<h1>ğŸ§‘â€ğŸ’¼ ë©”ì´ì»¤ Â· í€˜ìŠ¤íŠ¸ ê´€ë¦¬</h1>
<div id="list"></div>

<script>
const QUEST_KEY="quests";
const APPLY_KEY="applications";

const quests=JSON.parse(localStorage.getItem(QUEST_KEY))||[];
const apps=JSON.parse(localStorage.getItem(APPLY_KEY))||[];
const list=document.getElementById("list");

function save(){
  localStorage.setItem(QUEST_KEY,JSON.stringify(quests));
  localStorage.setItem(APPLY_KEY,JSON.stringify(apps));
  render();
}

function selectSolver(questId,solverId){
  const q=quests.find(q=>q.id===questId);
  q.status="in_progress";
  q.assignedSolverId=solverId;

  apps.forEach(a=>{
    if(a.questId===questId){
      a.status=a.solverId===solverId?"accepted":"rejected";
    }
  });
  save();
}

function render(){
  list.innerHTML="";
  quests.forEach(q=>{
    const div=document.createElement("div");
    div.className="quest";

    const related=apps.filter(a=>a.questId===q.id && a.status==="applied");

    div.innerHTML=`
      <strong>${q.title}</strong><br>
      ìƒíƒœ: ${q.status}<br>
      <small>ì§€ì›ì ìˆ˜: ${related.length}</small>
    `;

    related.forEach(a=>{
      const btn=document.createElement("button");
      btn.className="select";
      btn.textContent=`${a.solverId} ì„ íƒ`;
      btn.onclick=()=>selectSolver(q.id,a.solverId);
      div.appendChild(document.createElement("br"));
      div.appendChild(btn);
    });

    list.appendChild(div);
  });
}

render();
</script>
</body>
</html>
