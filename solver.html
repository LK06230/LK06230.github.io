<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì†”ë²„</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:system-ui;background:#020617;color:#e5e7eb;padding:30px}
.section{margin-bottom:40px}
.quest{background:#0f172a;padding:16px;border-radius:10px;margin-bottom:12px}
button{margin-top:8px;padding:8px 12px;border:none;border-radius:6px;font-weight:bold;cursor:pointer}
.apply{background:#38bdf8;color:#022c22}
.done{background:#22c55e;color:#022c22}
.disabled{background:#334155;color:#94a3b8}
small{opacity:.7}
</style>
</head>
<body>

<h1>ğŸ§‘â€ğŸ”§ ì†”ë²„</h1>

<div class="section">
<h2>ğŸ†• ì§€ì› ê°€ëŠ¥í•œ í€˜ìŠ¤íŠ¸</h2>
<div id="open"></div>
</div>

<div class="section">
<h2>ğŸ“‚ ë‚´ê°€ ì§€ì›í•œ í€˜ìŠ¤íŠ¸</h2>
<div id="applied"></div>
</div>

<div class="section">
<h2>ğŸš€ ì§„í–‰ ì¤‘ í€˜ìŠ¤íŠ¸</h2>
<div id="doing"></div>
</div>

<script>
const SOLVER="solver-demo";
const QUEST_KEY="quests";
const APPLY_KEY="applications";
const SUB_KEY="submissions";

let quests=JSON.parse(localStorage.getItem(QUEST_KEY))||[];
let apps=JSON.parse(localStorage.getItem(APPLY_KEY))||[];
let subs=JSON.parse(localStorage.getItem(SUB_KEY))||[];

const open=document.getElementById("open");
const applied=document.getElementById("applied");
const doing=document.getElementById("doing");

function save(){
  localStorage.setItem(QUEST_KEY,JSON.stringify(quests));
  localStorage.setItem(APPLY_KEY,JSON.stringify(apps));
  localStorage.setItem(SUB_KEY,JSON.stringify(subs));
  render();
}

function applyQuest(id){
  apps.push({id:Date.now(),questId:id,solverId:SOLVER,status:"applied"});
  save();
}

function submitQuest(id){
  subs.push({id:Date.now(),questId:id,solverId:SOLVER,content:"ì™„ë£Œ"});
  const q=quests.find(q=>q.id===id);
  q.status="review";
  save();
}

function render(){
  open.innerHTML="";
  applied.innerHTML="";
  doing.innerHTML="";

  quests.forEach(q=>{
    const myApp=apps.find(a=>a.questId===q.id && a.solverId===SOLVER);

    if(q.status==="open"){
      const div=document.createElement("div");
      div.className="quest";
      div.innerHTML=`
        <strong>${q.title}</strong><br>
        ğŸ’° ${q.reward}<br>
        <button class="apply">ì§€ì›í•˜ê¸°</button>
      `;
      div.querySelector("button").onclick=()=>applyQuest(q.id);
      open.appendChild(div);
    }

    if(myApp){
      const div=document.createElement("div");
      div.className="quest";
      div.innerHTML=`
        <strong>${q.title}</strong><br>
        ìƒíƒœ: ${myApp.status}
      `;
      applied.appendChild(div);
    }

    if(q.assignedSolverId===SOLVER && q.status==="in_progress"){
      const div=document.createElement("div");
      div.className="quest";
      div.innerHTML=`
        <strong>${q.title}</strong><br>
        <button class="done">ì™„ë£Œ ë³´ê³ </button>
      `;
      div.querySelector("button").onclick=()=>submitQuest(q.id);
      doing.appendChild(div);
    }
  });
}

render();
</script>
</body>
</html>
