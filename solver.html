<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Solver</title>
<style>
body{background:#020617;color:#e5e7eb;font-family:system-ui;padding:20px}
.quest{border:1px solid #334155;padding:10px;margin-top:10px}
button{margin-top:6px}
</style>
</head>
<body>

<h2>ğŸ§‘â€ğŸ”§ ì†”ë²„</h2>
<h3 id="balance"></h3>
<div id="list"></div>

<script>
const user=JSON.parse(localStorage.getItem("currentUser"));
let quests=JSON.parse(localStorage.getItem("quests"))||[];

function save(){
  localStorage.setItem("quests",JSON.stringify(quests));
  render();
}

function apply(qid){
  const q=quests.find(q=>q.id===qid);
  if(!q.applicants.includes(user.id))
    q.applicants.push(user.id);
  save();
}

function complete(qid){
  const q=quests.find(q=>q.id===qid);
  q.status="review";
  save();
}

function render(){
  const users=JSON.parse(localStorage.getItem("users"))||[];
  const me=users.find(u=>u.id===user.id);
  balance.innerText=`ğŸ’° ì”ì•¡: ${me?.balance||0}`;

  list.innerHTML="";
  quests.forEach(q=>{
    const d=document.createElement("div");
    d.className="quest";
    d.innerHTML=`
      <b>${q.title}</b><br>
      ë³´ìƒ: ${q.reward}<br>
      ìƒíƒœ: ${q.status}
    `;

    if(q.status==="open"){
      const b=document.createElement("button");
      b.textContent="ì§€ì›";
      b.onclick=()=>apply(q.id);
      d.appendChild(b);
    }

    if(q.status==="in_progress" && q.assigned===user.id){
      const b=document.createElement("button");
      b.textContent="ì™„ë£Œ ë³´ê³ ";
      b.onclick=()=>complete(q.id);
      d.appendChild(b);
    }

    list.appendChild(d);
  });
}
render();
</script>

</body>
</html>
